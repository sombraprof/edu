import{_ as lt,l as d,o as r,b as B,g as D,e as t,C as T,w as H,t as c,D as m,k as nt,F as R,p as J,f as h,E as rt,G as it,m as L,T as N,r as w,H as ct,c as A,h as dt,I as ut,j as pt,n as ft}from"./index-6tz7n0Hg.js";import{r as Q,p as mt}from"./hljs-utils-BZutKiLg.js";import{G as gt,a as xt}from"./GlobalLoader-CQEiVoIX.js";const ht=[{value:"all",label:"Tudo",icon:"fa-solid fa-layer-group"},{value:"pending",label:"Pendentes",icon:"fa-regular fa-circle"},{value:"completed",label:"Concluídas",icon:"fa-solid fa-check"}],bt={name:"ExerciseView",components:{GlobalAlert:xt,GlobalLoader:gt},props:{id:{type:String,required:!0}},setup(M){const o=ut(),y=w(!0),a=w(null),i=ct({id:"",title:"",description:"",totalExercises:0}),g=w([]),b=w("all"),k=w(""),V=ht,s=e=>mt.sanitize(String(e||""),{SAFE_FOR_TEMPLATES:!0,ADD_TAGS:["code-text"]}),x=e=>{if(!e)return"";const l=String(e).trim();if(!l)return"";const n=[];let u=!0;const _=f=>f.replace(/`([^`]+)`/g,"<code-text>$1</code-text>").replace(/\*\*([^*]+)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br />"),p=f=>{f.split(/\n{2,}/g).forEach(j=>{const E=j.trim();if(!E)return;const P=_(E),at=u?"":' class="mt-3"';n.push(`<p${at}>${P}</p>`),u=!1})},C=f=>f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),F=/```(\w+)?\n([\s\S]*?)```/g;let q=0,v;for(;(v=F.exec(l))!==null;){const f=l.slice(q,v.index);f.trim()&&p(f);const G=(v[1]||"plaintext").trim().toLowerCase(),j=C(v[2].replace(/\s+$/g,"")),E=u?"code-snippet code-snippet--first":"code-snippet",P=G?`language-${G}`:"language-plaintext";n.push(`<pre class="${E}"><code class="${P}">${j}</code></pre>`),u=!1,q=v.index+v[0].length}const z=l.slice(q);return z.trim()&&p(z),n.join("")},K=(e,l)=>{const n=e.id||l+1,u=e.titulo||`Questão ${n}`,_=s(x(e.enunciado||"")),p=e.dica?String(e.dica).trim():"",C=p.length>0,F=C?s(x(p)):"";return{uid:`${i.id}-${n}`,id:n,title:u,statementHtml:_,hintHtml:F,hasHint:C,solution:e.solucao||"",searchText:`${u} ${e.enunciado||""} ${p}`.toLowerCase(),completed:!1,showHint:!1,showSolution:!1}},S=A(()=>i.id?`lista_${i.id}_completed`:""),U=()=>{if(!S.value||!window.localStorage)return;const e=JSON.parse(localStorage.getItem(S.value)||"[]");g.value.forEach(l=>{l.completed=e.includes(l.id)})},O=()=>{if(!S.value||!window.localStorage)return;const e=g.value.filter(l=>l.completed).map(l=>l.id);localStorage.setItem(S.value,JSON.stringify(e))},W=e=>{e.completed=!e.completed,O()},X=e=>{e.hasHint&&(e.showHint=!e.showHint)},Y=async e=>{e.showSolution=!e.showSolution,e.showSolution&&(await ft(),setTimeout(()=>Q(),30))},Z=async e=>{try{await navigator.clipboard?.writeText(e.solution||""),window.__showSnackbar&&window.__showSnackbar("Solução copiada")}catch(l){console.error("Failed to copy solution",l)}},tt=()=>{g.value.forEach(e=>{e.completed=!1}),O()},et=e=>b.value===e?"btn-filled":"btn-tonal",st=A(()=>{const e=k.value.trim().toLowerCase();return g.value.filter(l=>!(b.value==="completed"&&!l.completed||b.value==="pending"&&l.completed||e&&!l.searchText.includes(e)))}),$=A(()=>g.value.filter(e=>e.completed).length),ot=A(()=>i.totalExercises?Math.round($.value/i.totalExercises*100):0),I=async e=>{try{y.value=!0,a.value=null,i.id=e;const l=await fetch(`/algi/exercises/${e}.json`);if(!l.ok)throw new Error("Lista de exercícios não encontrada.");const n=await l.json();i.title=n.titulo||`Lista ${e}`,i.description=n.descricao||"Coleção de desafios práticos em C.",i.totalExercises=Array.isArray(n.questoes)?n.questoes.length:0;const u=Array.isArray(n.questoes)?n.questoes.map((_,p)=>K(_,p)):[];if(g.value=u,window.localStorage)try{localStorage.setItem(`lista_${e}_total`,i.totalExercises)}catch{}U(),setTimeout(()=>Q(),60)}catch(l){console.error(l),a.value=l.message||"Erro ao carregar a lista."}finally{y.value=!1}};return dt(()=>{const e=M.id||o.params.id;e?I(e):(a.value="ID da lista não informado.",y.value=!1)}),pt(()=>M.id,e=>{e&&e!==i.id&&I(e)}),{loading:y,error:a,header:i,filterOptions:V,statusFilter:b,searchTerm:k,filterClass:et,visibleExercises:st,toggleCompletion:W,toggleHint:X,toggleSolution:Y,copySolution:Z,resetProgress:tt,completedCount:$,progress:ot}}},_t={class:"exercise-view space-y-10"},vt={key:2,class:"space-y-12"},yt={class:"card p-8 space-y-6 shadow-elevation-2"},kt={class:"flex flex-wrap items-center justify-between gap-4"},wt={class:"mt-4 text-display-small font-semibold text-neutral-900 dark:text-neutral-100"},St={class:"mt-3 text-body-large text-neutral-700 dark:text-neutral-300 max-w-3xl"},Ct={class:"flex flex-wrap items-center gap-4 text-label-large text-neutral-600 dark:text-neutral-300"},Et={class:"inline-flex items-center gap-2"},Tt={class:"grid gap-6 md:grid-cols-3"},Ht={class:"card p-6 shadow-elevation-1 md:col-span-2 flex flex-col gap-6 bg-primary-50 dark:bg-primary-900/20"},Lt={class:"flex flex-wrap justify-between gap-4 items-center"},At={class:"text-body-medium text-neutral-600 dark:text-neutral-300"},Mt={class:"progress",role:"presentation"},Vt={class:"card p-6 shadow-elevation-1 flex flex-col gap-4"},Ft={class:"flex flex-wrap gap-3"},qt=["onClick"],Gt={class:"w-full"},jt={class:"flex items-center gap-3 px-3 py-2 rounded-xl border border-neutral-200 dark:border-neutral-700 bg-surface-light-50 dark:bg-surface-dark-50 focus-within:border-primary-400 focus-within:ring-1 focus-within:ring-primary-400"},Pt={class:"space-y-6"},Bt={key:"grid",class:"space-y-6"},Dt={class:"flex flex-wrap justify-between gap-4 items-start"},Nt={class:"space-y-2"},Ot={class:"inline-flex items-center gap-2"},$t={class:"leading-none"},It={key:0,class:"text-label-small text-neutral-500 dark:text-neutral-400"},zt={class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"},Rt=["onClick"],Jt=["innerHTML"],Qt={key:0,class:"mt-6 callout callout-info space-y-2"},Kt=["innerHTML"],Ut={key:0,class:"mt-6 border border-neutral-200 dark:border-neutral-700 rounded-2xl overflow-hidden"},Wt={class:"flex items-center justify-between px-6 py-4 bg-neutral-900 text-neutral-100"},Xt=["onClick"],Yt={class:"bg-neutral-900 text-neutral-100"},Zt={class:"overflow-auto p-6 text-sm",tabindex:"0"},te={class:"language-c"},ee={class:"mt-6 flex flex-wrap gap-3"},se=["onClick"],oe=["onClick"];function ae(M,o,y,a,i,g){const b=D("GlobalLoader"),k=D("GlobalAlert"),V=D("router-link");return r(),d("div",_t,[a.loading?(r(),B(b,{key:0,title:"Carregando lista",subtitle:"Estamos preparando os exercícios..."})):a.error?(r(),B(k,{key:1,text:a.error,variant:"error",icon:"fa-solid fa-triangle-exclamation"},null,8,["text"])):(r(),d("div",vt,[t("section",yt,[t("div",kt,[t("div",null,[T(V,{class:"inline-flex items-center gap-2 text-primary-700 dark:text-primary-300 text-label-large hover:underline",to:"/"},{default:H(()=>[...o[2]||(o[2]=[t("i",{class:"fa-solid fa-arrow-left-long text-sm"},null,-1),t("span",null,"Voltar para aulas e listas",-1)])]),_:1}),t("h1",wt,c(a.header.title),1),t("p",St,c(a.header.description),1)]),t("div",Ct,[t("span",Et,[o[3]||(o[3]=t("i",{class:"fa-solid fa-list-check text-primary-600"},null,-1)),m(" "+c(a.header.totalExercises)+" exercícios ",1)]),o[4]||(o[4]=t("span",{class:"inline-flex items-center gap-2"},[t("i",{class:"fa-solid fa-clock text-primary-600"}),m(" Progresso salvo neste dispositivo ")],-1))])])]),t("section",Tt,[t("div",Ht,[t("div",Lt,[t("div",null,[o[5]||(o[5]=t("h2",{class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"}," Seu progresso ",-1)),t("p",At,c(a.completedCount)+" de "+c(a.header.totalExercises)+" exercícios concluídos ",1)]),t("button",{class:"btn btn-text text-neutral-600 dark:text-neutral-300 hover:text-neutral-800",type:"button",onClick:o[0]||(o[0]=(...s)=>a.resetProgress&&a.resetProgress(...s))},[...o[6]||(o[6]=[t("i",{class:"fa-solid fa-rotate-left flex-shrink-0"},null,-1),m(" Limpar progresso ",-1)])])]),t("div",Mt,[t("div",{class:"progress__bar progress__bar--primary",style:nt({width:a.progress+"%"})},null,4)]),o[7]||(o[7]=t("p",{class:"text-body-small text-neutral-500 dark:text-neutral-400"}," Marque as atividades à medida que concluir. Você pode filtrar apenas as pendentes abaixo. ",-1))]),t("div",Vt,[o[10]||(o[10]=t("h2",{class:"text-title-medium font-semibold text-neutral-900 dark:text-neutral-100"}," Filtros rápidos ",-1)),t("div",Ft,[(r(!0),d(R,null,J(a.filterOptions,s=>(r(),d("button",{key:s.value,class:h(["btn",a.filterClass(s.value)]),type:"button",onClick:x=>a.statusFilter=s.value},[t("i",{class:h([s.icon,"flex-shrink-0"])},null,2),m(" "+c(s.label),1)],10,qt))),128))]),t("label",Gt,[o[9]||(o[9]=t("span",{class:"sr-only"},"Buscar por palavra-chave",-1)),t("div",jt,[o[8]||(o[8]=t("i",{class:"fa-solid fa-magnifying-glass text-neutral-500 dark:text-neutral-300"},null,-1)),rt(t("input",{"onUpdate:modelValue":o[1]||(o[1]=s=>a.searchTerm=s),class:"flex-1 bg-transparent border-0 focus:outline-none text-body-medium text-neutral-700 dark:text-neutral-200 placeholder:text-neutral-500 dark:placeholder:text-neutral-500",type:"search",placeholder:"Buscar por palavra-chave",autocomplete:"off"},null,512),[[it,a.searchTerm]])])])])]),t("section",Pt,[T(N,{name:"fade",mode:"out-in"},{default:H(()=>[a.visibleExercises.length===0?(r(),B(k,{key:"empty",text:"Nenhum exercício encontrado com os filtros atuais.",variant:"info",icon:"fa-regular fa-circle-question"})):(r(),d("div",Bt,[(r(!0),d(R,null,J(a.visibleExercises,s=>(r(),d("article",{key:s.uid,class:h(["card p-6 shadow-elevation-1 transition-transform duration-150 exercise-card",{"exercise-card--done":s.completed}])},[t("header",Dt,[t("div",Nt,[t("div",Ot,[t("span",{class:h(["badge",s.completed?"badge--success":"badge--secondary"])},[t("i",{class:h([s.completed?"fa-solid fa-check":"fa-regular fa-circle","text-sm"])},null,2),t("span",$t,"Questão "+c(s.id),1)],2),s.hasHint?(r(),d("span",It," Dica disponível ")):L("",!0)]),t("h3",zt,c(s.title),1)]),t("button",{type:"button",class:"btn btn-outlined",onClick:x=>a.toggleCompletion(s)},[t("i",{class:h([s.completed?"fa-solid fa-rotate-left":"fa-solid fa-check","flex-shrink-0"])},null,2),m(" "+c(s.completed?"Marcar como pendente":"Marcar como concluída"),1)],8,Rt)]),t("div",{class:"mt-4 md3-content text-body-medium text-neutral-700 dark:text-neutral-200",innerHTML:s.statementHtml},null,8,Jt),T(N,{name:"fade"},{default:H(()=>[s.showHint&&s.hasHint?(r(),d("div",Qt,[o[11]||(o[11]=t("h4",{class:"callout__title text-title-small font-semibold text-primary-700 dark:text-primary-200"}," Sugestão de abordagem ",-1)),t("p",{class:"text-body-medium text-neutral-700 dark:text-neutral-200",innerHTML:s.hintHtml},null,8,Kt)])):L("",!0)]),_:2},1024),T(N,{name:"fade"},{default:H(()=>[s.showSolution?(r(),d("div",Ut,[t("header",Wt,[o[13]||(o[13]=t("span",{class:"font-semibold"},"Solução em C",-1)),t("button",{class:"btn btn-text btn-text--light",type:"button",onClick:x=>a.copySolution(s)},[...o[12]||(o[12]=[t("i",{class:"fa-solid fa-copy flex-shrink-0"},null,-1),m(" Copiar ",-1)])],8,Xt)]),t("div",Yt,[t("pre",Zt,[t("code",te,c(s.solution),1)])])])):L("",!0)]),_:2},1024),t("div",ee,[s.hasHint?(r(),d("button",{key:0,class:"btn btn-tonal",type:"button",onClick:x=>a.toggleHint(s)},[o[14]||(o[14]=t("i",{class:"fa-regular fa-lightbulb flex-shrink-0"},null,-1)),m(" "+c(s.showHint?"Ocultar dica":"Ver dica"),1)],8,se)):L("",!0),t("button",{class:"btn btn-filled",type:"button",onClick:x=>a.toggleSolution(s)},[t("i",{class:h(["fa-solid",s.showSolution?"fa-eye-slash":"fa-eye","flex-shrink-0"])},null,2),m(" "+c(s.showSolution?"Ocultar solução":"Ver solução"),1)],8,oe)])],2))),128))]))]),_:1})])]))])}const ie=lt(bt,[["render",ae],["__scopeId","data-v-3ec2eef6"]]);export{ie as default};
