{
  "formatVersion": "md3.lesson.v1",
  "id": "lesson-20",
  "title": "Estrutura de repetição do-while",
  "summary": "Apresenta o do-while em C para menus e validações que exigem uma execução inicial garantida.",
  "description": "A aula destaca quando o do-while simplifica o código, demonstra a construção de menus interativos e orienta sobre validações que precisam rodar pelo menos uma vez.",
  "objectives": [
    "Identificar problemas que exigem execução mínima antes da validação.",
    "Implementar menus interativos utilizando a estrutura do-while.",
    "Comparar vantagens do do-while em relação a while e for em fluxos de confirmação."
  ],
  "competencies": ["05", "12"],
  "skills": [
    "Organizar mensagens e leituras obrigatórias dentro do bloco do-while.",
    "Controlar o fluxo de menu avaliando a condição de repetição ao final.",
    "Validar opções digitadas repetindo o menu até receber entrada aceitável."
  ],
  "outcomes": [
    "Entrega menu funcional que executa ao menos uma ação antes de testar a condição de saída.",
    "Justifica a escolha do do-while em relatório ou apresentação curta.",
    "Implementa validação que rejeita entradas inválidas e reapresenta o menu automaticamente."
  ],
  "prerequisites": [
    "Conhecer while e condicionais.",
    "Ter utilizado scanf e printf em exercícios anteriores."
  ],
  "tags": ["loops", "do-while", "menus"],
  "duration": 110,
  "modality": "in-person",
  "resources": [
    {
      "label": "Playbook do menu bancário",
      "type": "handout",
      "url": "https://example.edu/algi/guias/menu-bancario-do-while.pdf"
    },
    {
      "label": "Checklist de testes do-while",
      "type": "spreadsheet",
      "url": "https://docs.google.com/spreadsheets/d/1ALGIChecklistDoWhile"
    },
    {
      "label": "Vídeo: Do-while loops (Curso em Vídeo)",
      "type": "video",
      "url": "https://www.youtube.com/watch?v=OB6s06eQGP0"
    },
    {
      "label": "Projeto OnlineGDB – Menu bancário",
      "type": "tool",
      "url": "https://onlinegdb.com/H1MenuDoWhile"
    },
    {
      "label": "Template de relatório de menu",
      "type": "document",
      "url": "https://example.edu/algi/templates/relatorio-menu.docx"
    }
  ],
  "bibliography": [
    "FORBELLONE, A. L. V.; EBERSPÄCHER, H. F. Lógica de Programação. Pearson, 2020.",
    "PIVA, A. Algoritmos e Estruturas de Dados. Novatec, 2021."
  ],
  "assessment": {
    "type": "practice",
    "description": "Entrega de menu bancário implementado em C com do-while e relatório de testes anexado."
  },
  "content": [
    {
      "type": "lessonPlan",
      "title": "Plano da aula",
      "cards": [
        {
          "icon": "target",
          "title": "Aplicações imediatas",
          "content": "Identificar cenários em que a execução inicial é obrigatória (menus, confirmações, validações)."
        },
        {
          "icon": "code",
          "title": "Laboratório guiado",
          "content": "Construir um menu completo com do-while incluindo tratamento de erros."
        },
        {
          "icon": "users",
          "title": "Revisão coletiva",
          "content": "Compartilhar decisões de fluxo e comparar com versões usando while."
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Por que usar do-while?",
      "content": [
        {
          "type": "paragraph",
          "text": "O do-while avalia a condição somente após executar o corpo, garantindo pelo menos uma passagem antes de verificar a saída."
        },
        {
          "type": "unorderedList",
          "items": [
            {
              "text": "Menus e caixas de diálogo precisam exibir opções antes de perguntar novamente."
            },
            {
              "text": "Rotinas de leitura devem armazenar a primeira entrada antes de validar continuidade."
            },
            {
              "text": "Processos com feedback imediato ao usuário se beneficiam da execução inicial garantida."
            }
          ]
        }
      ]
    },
    {
      "type": "callout",
      "variant": "info",
      "title": "Atenção ao estado inicial",
      "content": [
        {
          "type": "paragraph",
          "text": "Garanta que as variáveis usadas na condição sejam inicializadas com um valor coerente antes do laço."
        },
        {
          "type": "unorderedList",
          "items": [
            { "text": "Faça a limpeza do buffer de entrada quando uma leitura falhar." },
            {
              "text": "Mantenha a lógica de decisão dentro de um switch ou função dedicada para evitar blocos extensos."
            }
          ]
        }
      ]
    },
    {
      "type": "code",
      "language": "c",
      "title": "Menu interativo com do-while",
      "code": "#include <stdio.h>\n\nvoid registrar_venda(void) {\n  printf(\"Venda registrada!\\n\");\n}\n\nvoid gerar_relatorio(void) {\n  printf(\"Relatório gerado!\\n\");\n}\n\nint main(void) {\n  int opcao;\n  do {\n    printf(\"\\n=== Menu Principal ===\\n\");\n    printf(\"1 - Registrar venda\\n\");\n    printf(\"2 - Gerar relatório\\n\");\n    printf(\"0 - Sair\\n\");\n    printf(\"Escolha: \");\n\n    if (scanf(\"%d\", &opcao) != 1) {\n      opcao = -1;\n      while (getchar() != '\\n') { }\n      printf(\"Entrada inválida. Tente novamente.\\n\");\n      continue;\n    }\n\n    switch (opcao) {\n      case 1:\n        registrar_venda();\n        break;\n      case 2:\n        gerar_relatorio();\n        break;\n      case 0:\n        printf(\"Encerrando o sistema.\\n\");\n        break;\n      default:\n        printf(\"Opção não reconhecida.\\n\");\n    }\n  } while (opcao != 0);\n\n  return 0;\n}\n"
    },
    {
      "type": "contentBlock",
      "title": "Boas práticas de validação",
      "content": [
        {
          "type": "orderedList",
          "items": [
            { "text": "Descarte resíduos do buffer antes de repetir o menu." },
            {
              "text": "Centralize a lógica de decisão em funções ou switch para manter o laço enxuto."
            },
            {
              "text": "Atualize mensagens de feedback imediato para orientar o usuário após cada iteração."
            }
          ]
        }
      ]
    },
    {
      "type": "callout",
      "variant": "task",
      "title": "Prática sugerida",
      "content": [
        {
          "type": "paragraph",
          "text": "Adapte o menu para calcular o fatorial solicitado no TED, garantindo repetição até que o usuário peça para sair."
        },
        {
          "type": "unorderedList",
          "items": [
            { "text": "Inclua opção para exibir histórico das últimas respostas válidas." },
            { "text": "Documente no relatório quando preferiria while ou for e por quê." }
          ]
        }
      ]
    }
  ]
}
