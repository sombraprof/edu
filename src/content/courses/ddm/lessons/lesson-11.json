{
  "formatVersion": "md3.lesson.v1",
  "id": "lesson-11",
  "title": "Aula 11: Unidade II – Intents Implícitas",
  "summary": "Mostra como delegar ações a outros apps com Intents implícitas, validando disponibilidade e protegendo dados sensíveis.",
  "objective": "Integrar funcionalidades do ecossistema Android ao aplicativo por meio de Intents implícitas seguras.",
  "objectives": [
    "Reconhecer diferenças entre Intents explícitas e implícitas.",
    "Construir Intents para ações comuns como abrir URLs, discar e compartilhar.",
    "Verificar capacidade do dispositivo e tratar respostas do usuário com segurança."
  ],
  "competencies": [
    "Integração de aplicativos com o ecossistema Android",
    "Experiência do usuário orientada a contexto"
  ],
  "skills": [
    "Montar Intents com ação, URI e categorias apropriadas.",
    "Usar `PackageManager` para validar handlers disponíveis.",
    "Criar choosers para oferecer opções ao usuário."
  ],
  "outcomes": [
    "Mini app com três ações implícitas (site, discagem, compartilhamento).",
    "Checklist de segurança com verificações antes de iniciar Intents."
  ],
  "prerequisites": [
    "Dominar Intents explícitas (aula 9).",
    "Projeto configurado com permissões básicas (INTERNET, CALL_PHONE opcional)."
  ],
  "tags": ["android", "intents", "ecosystem"],
  "duration": 100,
  "modality": "in-person",
  "resources": [
    {
      "label": "Common intents",
      "url": "https://developer.android.com/guide/components/intents-common",
      "type": "reference"
    },
    {
      "label": "Securely invoking external intents",
      "url": "https://developer.android.com/training/basics/intents/sending",
      "type": "article"
    }
  ],
  "bibliography": [
    "SIMAS, Vinícius. Desenvolvimento para Dispositivos Móveis. Grupo A, 2019.",
    "GOOGLE. Send simple data to other apps. Android Developers, 2024."
  ],
  "assessment": {
    "type": "practice",
    "description": "Mini app de ações com verificação de handlers e fallback de erro.",
    "rubric": "Entrega demonstra três intents funcionais, exibe mensagens claras e publica código no repositório."
  },
  "content": [
    {
      "type": "videos",
      "title": "Referências em vídeo – Unidade II",
      "videos": [
        {
          "url": "https://www.youtube.com/watch?v=FrteWKKVyzI",
          "title": "Lifecycle-aware components",
          "caption": "Sessão oficial do Android Developers sobre ciclos de vida. Créditos: Android Developers (Google, 2020)."
        },
        {
          "url": "https://www.youtube.com/playlist?list=PLWz5rJ2EKKc8j2B95zGMb8Qbb8VG-Snys",
          "title": "Android Developer Fundamentals",
          "caption": "Playlist institucional com foco em intents, navegação e ciclo de vida. Créditos: Android Developers (Google, 2024)."
        }
      ]
    },
    {
      "type": "flightPlan",
      "title": "Plano de voo da aula (1h 40min)",
      "items": [
        "(10 min) Check-in: onde os apps delegam tarefas hoje?",
        "(20 min) Teoria: ação + dados + categoria em Intents implícitas.",
        "(20 min) Ações comuns: abrir site, discar, compartilhar.",
        "(20 min) Boas práticas: verificando apps disponíveis e tratando exceções.",
        "(15 min) Laboratório guiado: mini app de ações.",
        "(15 min) TED e checklist."
      ]
    },
    {
      "type": "callout",
      "variant": "info",
      "title": "Pergunta",
      "content": [
        {
          "type": "paragraph",
          "text": "Seu app precisa compartilhar um comprovante por e-mail, mas o usuário pode ter vários clientes instalados. Como escolher o melhor fluxo?"
        }
      ]
    },
    {
      "type": "cardGrid",
      "title": "Intents implícitas frequentes",
      "columns": 3,
      "cards": [
        {
          "title": "ACTION_VIEW",
          "subtitle": "Abrir conteúdos",
          "tone": "info",
          "items": ["URLs http/https", "Geo URIs", "Documentos externos"]
        },
        {
          "title": "ACTION_DIAL",
          "subtitle": "Telefonia",
          "tone": "warning",
          "items": [
            "Não requer permissão",
            "Permite confirmar antes de ligar",
            "Aceita URIs `tel:`"
          ]
        },
        {
          "title": "ACTION_SEND",
          "subtitle": "Compartilhamento",
          "tone": "success",
          "items": [
            "Suporta texto, arquivos e múltiplos targets",
            "Combine com chooser",
            "Defina `type` correto"
          ]
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Construindo as Intents",
      "content": [
        {
          "type": "code",
          "language": "kotlin",
          "code": "fun openWebsite(url: String) {\n  val intent = Intent(Intent.ACTION_VIEW, Uri.parse(url))\n  startActivity(Intent.createChooser(intent, \"Abrir com\"))\n}\n\nfun dialPhone(phone: String) {\n  val intent = Intent(Intent.ACTION_DIAL).apply {\n    data = Uri.parse(\"tel:$phone\")\n  }\n  startActivity(intent)\n}\n\nfun shareText(message: String) {\n  val intent = Intent(Intent.ACTION_SEND).apply {\n    type = \"text/plain\"\n    putExtra(Intent.EXTRA_TEXT, message)\n  }\n  startActivity(Intent.createChooser(intent, \"Compartilhar via\"))\n}\n\n// Referência: SIMAS, Vinícius (2019)"
        },
        {
          "type": "callout",
          "variant": "warning",
          "title": "URLs precisam de protocolo",
          "content": [
            {
              "type": "paragraph",
              "text": "Sempre garanta que a URI contenha `http://` ou `https://` para evitar crashes."
            }
          ]
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Verificando se existe app compatível",
      "content": [
        {
          "type": "code",
          "language": "kotlin",
          "code": "fun Intent.safeStart(context: Context, onUnavailable: () -> Unit) {\n  if (resolveActivity(context.packageManager) != null) {\n    context.startActivity(this)\n  } else {\n    onUnavailable()\n  }\n}\n\nfun shareImage(uri: Uri) {\n  val intent = Intent(Intent.ACTION_SEND).apply {\n    type = \"image/png\"\n    putExtra(Intent.EXTRA_STREAM, uri)\n    addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION)\n  }\n  intent.safeStart(this) {\n    showSnackbar(\"Nenhum aplicativo compatível encontrado\")\n  }\n}\n\n// Referência: SIMAS, Vinícius (2019)"
        },
        {
          "type": "paragraph",
          "text": "Encapsule a verificação em uma extensão utilitária para repetir o padrão em todo o projeto."
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Cuidados com privacidade",
      "content": [
        {
          "type": "orderedList",
          "items": [
            {
              "title": "Dados sensíveis",
              "text": "Evite incluir tokens ou informações confidenciais em Intents."
            },
            {
              "title": "Permissões",
              "text": "Solicite apenas quando necessário (ex.: `CALL_PHONE` para ligação direta)."
            },
            {
              "title": "Persistência",
              "text": "Limpe URIs temporárias após o compartilhamento."
            }
          ]
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Laboratório",
      "content": [
        {
          "type": "orderedList",
          "items": [
            {
              "title": "Protótipo",
              "text": "Crie uma tela com campo de texto e botões para site, telefone e compartilhamento."
            },
            {
              "title": "Validação",
              "text": "Teste com entradas inválidas e registre mensagens exibidas."
            },
            {
              "title": "Choosers",
              "text": "Personalize títulos e ícones do chooser usando `Intent.createChooser`."
            }
          ]
        },
        {
          "type": "callout",
          "variant": "task",
          "title": "TED",
          "content": [
            {
              "type": "paragraph",
              "text": "Estenda o app adicionando uma Intent implícita para abrir o aplicativo de mapas na localização da instituição."
            }
          ]
        }
      ]
    },
    {
      "type": "bibliographyBlock",
      "title": "Referências complementares",
      "references": [
        "ANDROID DEVELOPERS. Common intents. 2024.",
        "MEDNIEKS, Zigurd. Programming Android. O'Reilly, 4ª ed., 2022. Cap. 6."
      ]
    },
    {
      "type": "contentBlock",
      "title": "Exemplo de código comentado",
      "content": [
        {
          "type": "paragraph",
          "text": "Utilize o snippet como referência rápida para tratar o ciclo de vida e a navegação abordados em Intents Implícitas."
        },
        {
          "type": "code",
          "language": "kotlin",
          "code": "override fun onStart() {\n    super.onStart()\n    android.util.Log.d(\"UnidadeII\", \"Intents Implícitas: tela ativa\")\n}\n\nval intent = Intent(this, DetalhesActivity::class.java).apply {\n    putExtra(\"EXTRA_STATUS\", \"Intents Implícitas\")\n}\nstartActivity(intent)\n// Referência: SIMAS, Vinícius (2019)"
        },
        {
          "type": "paragraph",
          "text": "A anotação final reforça a ligação direta com SIMAS, Vinícius (2019), garantindo alinhamento metodológico."
        },
        {
          "type": "callout",
          "variant": "academic",
          "title": "Fundamentação bibliográfica",
          "content": [
            {
              "type": "paragraph",
              "text": "SIMAS, Vinícius. Desenvolvimento para Dispositivos Móveis. Grupo A, 2019."
            }
          ]
        }
      ]
    },
    {
      "type": "contentBlock",
      "title": "Leitura complementar e estudos de caso",
      "content": [
        {
          "type": "paragraph",
          "text": "Revise os fundamentos de Intents Implícitas observando como o estado é preservado entre atividades."
        },
        {
          "type": "list",
          "items": [
            "Releia: SIMAS, Vinícius. Desenvolvimento para Dispositivos Móveis. Grupo A, 2019.",
            "Conecte com o estudo: GOOGLE. Send simple data to other apps. Android Developers, 2024."
          ]
        },
        {
          "type": "paragraph",
          "text": "Mapeie um fluxo multi-activity do seu projeto e valide se os estados críticos estão protegidos."
        },
        {
          "type": "blockquote",
          "text": "GOOGLE. Send simple data to other apps. Android Developers, 2024."
        }
      ]
    }
  ],
  "metadata": {
    "status": "in-review",
    "updatedAt": "2024-05-26T00:00:00.000Z",
    "owners": ["Prof. Tiago Sombra"],
    "sources": ["Plano de integração DDM", "Notas de laboratório 2024.1"]
  }
}
